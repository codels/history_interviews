# Вопросы и ответы

## Вопрос 1
> В чем разница между ```(float)```, ```(double)``` и ```(real)```?

### Правильный ответ
Разницы нет, это псевдонимы.

## Вопрос 2
> В чем разница между ```exit``` и ```die```?

### Правильный ответ
Разницы нет, это псевдонимы.

## Вопрос 3
> Нужно реализовать подсчет метрики в нашу БД: сколько пользователей на странице конкретного поста (комментарии) доскролировали до блока комментариев. Т.е. нужно сохранять id Поста + количество просмотров. Так как задача поручена тебе и у тебя есть вариант выбора способа подсчета. Фронтенд часть сделает другой отдел, но выбор технологии за тобой. Страницу поста в сутки открывают 100 млн раз. Как бы ты организовал пободную задачу?

### Правильный ответ
1. Используем ajax, php обработчик.
2. В Redis мы записываем через INCR (Так как самое быстрое увеличение счетчика без его получения и перезаписи), где ключ story_cnt_123123 (123123 - это id поста)
3. Далее у нас есть скрипт, который выгребает все счетчики из редиса и импортирует их в MySQL. Этот скрипт работает на cron, периодичность раз в 10 мин. 
4. Скрипт делает команду в Redis KEYS story_cnt_* тем самым получат список ключей всех счетчиков, каждый счетчик зачитывает и удаляет из редиса. Данные заносит в MySQL

## Вопрос 4
> Давай тогда затронем тему noSQL. Вот если в той задаче выкинуть redis, оставить только php и noSQL бд, то в какую бы ты писал?

### Правильный ответ
*Пока что не знаю (Есть предположения Riak, Amazon DynamoDB)*

## Вопрос 4

*Задача по MySQL (Убрано по просьбе автора)*

## Вопрос 5

*Задача по MySQL (Убрано по просьбе автора)*

## Вопрос 6
> Необходимо реализовать функцию calc
```php
  echo calc(12)(4)(1)(fn($x, $y) => $x + $y); // 17
  echo calc(2)(3)(fn($x, $y) => $x * $y); // 6
  echo calc(5)(2)(fn($x, $y) => $x / $y); // 2.5
```

### Правильный ответ (!Предположительно)
```php
class Temp
{
    private $_params = [];
    private $_function = null;
    private $_paramsCount = 0;

    public function __construct($param)
    {
        $this->__invoke($param);
    }

    public function __invoke($param)
    {
        if (is_callable($param)) {
            $this->_function = $param;
            $this->_paramsCount = count((new ReflectionFunction($param))->getParameters());
            $result = null;
            while (count($this->_params) >= $this->_paramsCount) {
                $result = call_user_func_array($this->_function, array_splice($this->_params, 0, $this->_paramsCount));
                array_unshift($this->_params, $result);
            }
            return $result;
        } else {
            $this->_params[] = $param;
            return $this;
        }
    }
}

function calc($x)
{
    return new Temp($x);
}
```

## Вопрос 7
> Очень ленивый программист решил не упрощать выражение, когда потребовалось инвертировать его в негативное, а взять и внести все выражение в !(...). Это сильно усложнило читабельность кода. Твоя задача убрать !(...) из выражения, но при этом не менять блок if, т.е. нужно трансформировать выражение так, чтобы можно было убрать общее отрицание
```php
if (!(!$isAdmin && ($isModerator || !$isSaler))) {
}
```

### Правильный ответ
```php
if ($isAdmin || !$isModerator && $isSaler)) {
}
```

## Вопрос 8

*Задача по MySQL (Убрано по просьбе автора)*